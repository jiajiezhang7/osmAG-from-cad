# osmAG文件问题修复能力矩阵

## 问题类型分析与可修复性评估


基于两个验证工具检测出的问题类型，以下是详细的可修复性分析：

## Fix_ID版本问题类型

| 问题类别 | 问题类型 | 级别 | 可修复性 | 修复方法 | 理由 |
|----------|----------|------|----------|----------|------|
| **FILE** | 文件不存在 | ERROR | ❌ 不可修复 | 人工干预 | 需要提供正确的文件路径 |
| **XML** | XML解析错误 | ERROR | ⚠️ 部分可修复 | 格式修复 | 简单的格式错误可修复，结构性错误需人工 |
| **ROOT** | 根元素错误 | ERROR | ✅ 可修复 | 标准化修复 | 可自动设置正确的根元素和属性 |
| **ROOT** | 版本号不标准 | WARNING | ✅ 可修复 | 标准化修复 | 可自动设置为0.6 |
| **ROOT** | 缺少generator属性 | INFO | ✅ 可修复 | 补充属性 | 可自动添加默认generator |
| **NODE** | 缺少必需属性 | ERROR | ❌ 不可修复 | 人工干预 | 缺失的坐标等关键信息无法推断 |
| **NODE** | 属性值格式错误 | ERROR | ⚠️ 部分可修复 | 格式修复 | 数值格式可修复，无效值需人工 |
| **NODE** | 坐标超出范围 | ERROR | ⚠️ 部分可修复 | 范围修正 | 明显错误可修正，需谨慎处理 |
| **NODE** | action值不标准 | WARNING | ✅ 可修复 | 标准化修复 | 可设置为标准值"modify" |
| **WAY** | 缺少必需属性 | ERROR | ❌ 不可修复 | 人工干预 | 缺失的ID等关键信息无法推断 |
| **WAY** | 属性值格式错误 | ERROR | ⚠️ 部分可修复 | 格式修复 | 格式问题可修复，内容错误需人工 |
| **CLASSIFICATION** | 缺少osmAG:type标签 | WARNING | ⚠️ 部分可修复 | 智能推断 | 可根据其他标签推断类型 |
| **AREA** | 缺少必需标签 | ERROR | ⚠️ 部分可修复 | 智能补充 | osmAG:areaType可推断，level需人工 |
| **AREA** | 区域类型不标准 | WARNING | ✅ 可修复 | 标准化修复 | 可映射到标准类型 |
| **AREA** | 楼层值格式错误 | ERROR | ⚠️ 部分可修复 | 格式修复 | 数值格式可修复，无效值需人工 |
| **AREA** | 楼层数值不合理 | WARNING | ⚠️ 部分可修复 | 范围修正 | 明显错误可修正，需谨慎处理 |
| **AREA** | 节点数量不足 | ERROR | ❌ 不可修复 | 人工干预 | 需要添加更多节点来形成有效区域 |
| **AREA** | 区域未闭合 | ERROR | ✅ 可修复 | 自动闭合 | 可自动将最后一个节点设为第一个节点 |
| **AREA** | 引用不存在的节点 | ERROR | ❌ 不可修复 | 人工干预 | 需要创建缺失节点或修正引用 |
| **PASSAGE** | 缺少必需标签 | ERROR | ❌ 不可修复 | 人工干预 | from/to信息无法自动推断 |
| **PASSAGE** | 节点数量错误 | ERROR | ❌ 不可修复 | 人工干预 | 通道必须恰好2个节点，无法自动调整 |
| **PASSAGE** | 引用不存在的节点 | ERROR | ❌ 不可修复 | 人工干预 | 需要创建缺失节点或修正引用 |
| **PASSAGE** | 引用不存在的区域 | ERROR | ❌ 不可修复 | 人工干预 | 需要创建缺失区域或修正引用 |
| **PASSAGE** | from和to相同 | ERROR | ❌ 不可修复 | 人工干预 | 需要明确通道的起始和目标 |
| **CROSS_VALIDATION** | 通道节点不在区域边界 | WARNING | ❌ 不可修复 | 人工干预 | 需要调整节点位置或通道设计 |
| **CROSS_VALIDATION** | 层级不一致 | WARNING | ⚠️ 部分可修复 | 层级同步 | 可统一父子区域层级，需谨慎 |

## Semantic版本问题类型

| 问题类别 | 问题类型 | 级别 | 可修复性 | 修复方法 | 理由 |
|----------|----------|------|----------|----------|------|
| **SEMANTIC_NAMING** | 缺少name标签 | ERROR | ❌ 不可修复 | 人工干预 | 语义化名称需要人工定义 |
| **SEMANTIC_NAMING** | 命名格式不标准 | WARNING | ⚠️ 部分可修复 | 格式标准化 | 可尝试格式化，但可能改变语义 |
| **SEMANTIC_REFERENCE** | 引用不存在的区域 | ERROR | ❌ 不可修复 | 人工干预 | 需要创建缺失区域或修正引用 |
| **VERTICAL_TRANSPORT** | 只在一个楼层存在 | WARNING | ❌ 不可修复 | 人工干预 | 需要在其他楼层创建对应设施 |
| **VERTICAL_TRANSPORT** | 同楼层重复定义 | ERROR | ⚠️ 部分可修复 | 去重处理 | 可删除重复项，需确认保留哪个 |
| **VERTICAL_TRANSPORT** | 命名格式不标准 | WARNING | ⚠️ 部分可修复 | 格式标准化 | 可尝试格式化，但可能改变语义 |
| **CROSS_LEVEL_PASSAGE** | from和to不相同 | ERROR | ❌ 不可修复 | 人工干预 | 需要明确跨楼层逻辑 |
| **CROSS_LEVEL_PASSAGE** | 引用非垂直交通设施 | WARNING | ❌ 不可修复 | 人工干预 | 需要修正引用或设施类型 |
| **CROSS_LEVEL_PASSAGE** | 缺少level标签 | ERROR | ⚠️ 部分可修复 | 智能推断 | 可根据连接的区域推断层级 |
| **CROSS_LEVEL_PASSAGE** | 相邻楼层缺少设施 | WARNING | ❌ 不可修复 | 人工干预 | 需要在相邻楼层创建对应设施 |
| **LEVEL_CONSISTENCY** | 层级不一致 | WARNING | ⚠️ 部分可修复 | 层级同步 | 可统一相关元素层级，需谨慎 |

## 修复能力总结

### 高可修复性问题（✅ 可修复）
- 根元素标准化
- 属性值标准化（action、version等）
- 区域闭合性修复
- 区域类型标准化

### 中等可修复性问题（⚠️ 部分可修复）
- XML格式错误（简单情况）
- 数值格式修复
- 坐标范围修正
- 缺失标签智能补充
- 命名格式标准化
- 层级一致性修复

### 不可修复问题（❌ 不可修复）
- 缺失关键信息（坐标、ID、名称等）
- 结构性错误（节点数量、引用关系等）
- 语义相关问题（需要领域知识）
- 跨元素依赖问题

## 修复策略

### 自动修复原则
1. **安全性优先**：只修复不会改变语义的问题
2. **保守修复**：对于可能有多种解决方案的问题，选择最保守的方案
3. **备份机制**：修复前必须备份原文件
4. **验证机制**：修复后必须重新验证

### 修复优先级
1. **高优先级**：格式标准化、属性补充
2. **中优先级**：数值修正、类型标准化
3. **低优先级**：警告级别的格式问题

### 人工干预指导
对于不可修复的问题，提供：
1. **详细的问题描述**
2. **建议的修复方案**
3. **相关元素的上下文信息**
4. **修复示例**
